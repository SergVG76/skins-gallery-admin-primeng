<p-toolbar>
  <div class="p-toolbar-group-left">
    <span class="p-buttonset">
      <button
        pButton
        icon="pi pi-plus"
        (click)="addNew()"
        label="Add new"
      ></button>

      <button
        pButton
        icon="pi pi-pencil"
        (click)="edit()"
        label="Edit"
        class="toolbtn"
        [disabled]="-1 == currentIndex"
      ></button>

      <button
        pButton
        icon="pi pi-trash"
        (click)="delete()"
        label="Delete"
        class="toolbtn"
        [disabled]="-1 == currentIndex"
      ></button>
    </span>
  </div>

  <div class="p-toolbar-group-right">
    <span class="p-input-icon-left">
      <i class="pi pi-filter"></i>
      <input
        pInputText
        type="text"
        placeholder="Filter by name"
        [(ngModel)]="name"
      />
    </span>
    <p-button
      icon="pi pi-check"
      type="button"
      (click)="searchByName()"
      label="Apply"
      class="toolbtn"
    ></p-button>
  </div>
</p-toolbar>

<p-table
  [value]="skins"
  selectionMode="single"
  [(selection)]="currentSkin"
  dataKey="ID"
  [scrollable]="true"
  scrollHeight="800px"
  (onRowSelect)="onSkinSelect($event)"
  (onRowUnselect)="onSkinUnselect($event)"
  (onRowDblclick)="onSkinDblClick($event)"
  styleClass="p-datatable-gridlines p-datatable-sm"
>
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="SKIN_NAME">
        Name <p-sortIcon field="SKIN_NAME"></p-sortIcon>
      </th>
      <th pSortableColumn="SKIN_LINK">
        Download <p-sortIcon field="SKIN_LINK"></p-sortIcon>
      </th>
      <th pSortableColumn="LAST_DATE">
        Date <p-sortIcon field="LAST_DATE"></p-sortIcon>
      </th>
      <th pSortableColumn="BUY1">Buy <p-sortIcon field="BUY1"></p-sortIcon></th>
      <th pSortableColumn="RATING">
        Rating <p-sortIcon field="RATING"></p-sortIcon>
      </th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-skin>
    <tr [pSelectableRow]="skin" (dblclick)="onSkinDblClick($event, skin)">
      <td>{{skin.SKIN_NAME}}</td>
      <td>
        <a href="{{skin.SKIN_LINK}}">{{skin.SKIN_LINK}}</a>
      </td>
      <td>{{skin.LAST_DATE}}</td>
      <td>
        <a href="{{skin.BUY1}}" *ngIf="skin.BUY1">
          <i class="pi pi-shopping-cart"></i>
        </a>
      </td>
      <td>
        <p-rating
          [ngModel]="skin.RATING"
          stars="10"
          [readonly]="true"
          [cancel]="false"
        ></p-rating>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog
  [(visible)]="editDialog"
  [style]="{width: '750px'}"
  [modal]="true"
  header="Skin Details"
  styleClass="p-fluid"
>
  <ng-template pTemplate="content">
    <div class="p-field">
      <label for="name">Name</label>
      <input
        type="text"
        pInputTextid="name"
        [(ngModel)]="editSkin.SKIN_NAME"
        required
        autofocus
      />
      <small class="p-invalid" *ngIf="submitted && !editSkin.SKIN_NAME"
        >Name is required.</small
      >
    </div>
    <div class="p-field">
      <label for="fname">File name</label>
      <input
        type="text"
        pInputText
        id="fname"
        [(ngModel)]="editSkin.SKIN_LINK"
      />
      <small class="p-invalid" *ngIf="submitted && !editSkin.SKIN_LINK"
        >File name is required.</small
      >
    </div>
  </ng-template>

  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      label="Cancel"
      icon="pi pi-times"
      class="p-button-danger"
      (click)="hideDialog()"
    ></button>
    <button
      pButton
      pRipple
      label="Save"
      icon="pi pi-check"
      class="p-button-success"
      (click)="saveProduct()"
    ></button>
  </ng-template>
</p-dialog>
